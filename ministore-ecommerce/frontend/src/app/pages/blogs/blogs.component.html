<div class="blogs-page">
  <div class="container-fluid px-0">
    <!-- Hero Section -->
    <div class="hero-section">
      <div class="hero-content">
        <div class="hero-text">
          <h1 class="hero-title">üìö Blog & Tin T·ª©c</h1>
          <p class="hero-subtitle">Kh√°m ph√° nh·ªØng b√†i vi·∫øt m·ªõi nh·∫•t v·ªÅ c√¥ng ngh·ªá, xu h∆∞·ªõng v√† m·∫πo hay t·ª´ c√°c chuy√™n gia</p>
          <div class="hero-stats">
            <div class="stat-card">
              <div class="stat-icon">
                <i class="bi bi-file-text"></i>
              </div>
              <div class="stat-info">
                <span class="stat-number">{{ totalBlogs }}</span>
                <span class="stat-label">B√†i vi·∫øt</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">
                <i class="bi bi-tags"></i>
              </div>
              <div class="stat-info">
                <span class="stat-number">{{ categories.length }}</span>
                <span class="stat-label">Chuy√™n m·ª•c</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">
                <i class="bi bi-people"></i>
              </div>
              <div class="stat-info">
                <span class="stat-number">1.2K</span>
                <span class="stat-label">ƒê·ªôc gi·∫£</span>
              </div>
            </div>
          </div>
        </div>
        <div class="hero-image">
          <div class="floating-elements">
            <div class="floating-icon icon-1">üìù</div>
            <div class="floating-icon icon-2">üí°</div>
            <div class="floating-icon icon-3">üöÄ</div>
            <div class="floating-icon icon-4">‚≠ê</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Search and Filter Section -->
    <div class="search-filter-section">
      <div class="container">
        <div class="search-filter-card">
          <div class="row align-items-center">
            <div class="col-lg-6 mb-3 mb-lg-0">
              <div class="search-container">
                <div class="search-input-wrapper">
                  <i class="bi bi-search search-icon"></i>
                  <input 
                    type="text" 
                    class="search-input" 
                    placeholder="T√¨m ki·∫øm b√†i vi·∫øt, t√°c gi·∫£, ho·∫∑c ch·ªß ƒë·ªÅ..."
                    [(ngModel)]="searchQuery"
                    (keyup.enter)="onSearch()">
                  <button class="search-btn" (click)="onSearch()">
                    <i class="bi bi-arrow-right"></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="filter-container">
                <div class="filter-row">
                  <select class="filter-select" [(ngModel)]="selectedCategory" (change)="onCategoryChange(selectedCategory)">
                    <option value="">üéØ T·∫•t c·∫£ chuy√™n m·ª•c</option>
                    @for (category of categories; track category.id) {
                      <option [value]="category.slug">{{ category.name }}</option>
                    }
                  </select>
                  <button class="filter-clear-btn" (click)="clearFilters()" title="X√≥a b·ªô l·ªçc">
                    <i class="bi bi-x-circle"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="container">
        <div class="row">
          <!-- Blog Posts -->
          <div class="col-lg-8">
            <!-- Loading State -->
            @if (isLoading) {
              <div class="loading-container">
                <div class="loading-spinner">
                  <div class="spinner"></div>
                </div>
                <p class="loading-text">ƒêang t·∫£i nh·ªØng b√†i vi·∫øt hay nh·∫•t...</p>
              </div>
            } @else {
              <!-- Blog Grid -->
              @if (blogs.length > 0) {
                <div class="blog-grid">
                  @for (blog of blogs; track blog.id) {
                    <article class="blog-card">
                      <div class="blog-image-container">
                        <img [src]="blog.imageUrl" [alt]="blog.title" class="blog-image">
                        <div class="blog-overlay">
                          <div class="overlay-content">
                            <button class="read-btn" [routerLink]="['/blogs', blog.slug]">
                              <i class="bi bi-arrow-right"></i>
                              <span>ƒê·ªçc ngay</span>
                            </button>
                          </div>
                        </div>
                        <div class="blog-category">
                          <span class="category-badge">{{ blog.category }}</span>
                        </div>
                        <div class="blog-date">
                          <span class="date-badge">{{ formatDate(blog.publishDate) }}</span>
                        </div>
                      </div>
                      
                      <div class="blog-content">
                        <div class="blog-meta">
                          <div class="meta-item">
                            <i class="bi bi-person-circle"></i>
                            <span>{{ blog.author }}</span>
                          </div>
                          <div class="meta-item">
                            <i class="bi bi-eye"></i>
                            <span>{{ blog.views }}</span>
                          </div>
                          <div class="meta-item">
                            <i class="bi bi-heart"></i>
                            <span>{{ blog.likes }}</span>
                          </div>
                        </div>
                        
                        <h2 class="blog-title">
                          <a [routerLink]="['/blogs', blog.slug]" class="title-link">
                            {{ blog.title }}
                          </a>
                        </h2>
                        
                        <p class="blog-excerpt">{{ blog.excerpt }}</p>
                        
                        <div class="blog-footer">
                          <div class="blog-tags">
                            <span class="tag">#{{ blog.category.toLowerCase() }}</span>
                            <span class="tag">#blog</span>
                          </div>
                          <a [routerLink]="['/blogs', blog.slug]" class="read-more-link">
                            ƒê·ªçc ti·∫øp <i class="bi bi-arrow-right"></i>
                          </a>
                        </div>
                      </div>
                    </article>
                  }
                </div>

                <!-- Pagination -->
                <div class="pagination-container">
                  <nav class="pagination-nav">
                    <ul class="pagination">
                      <li class="page-item" [class.disabled]="currentPage === 0">
                        <button class="page-link" (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 0">
                          <i class="bi bi-chevron-left"></i>
                        </button>
                      </li>
                      @for (page of getPageNumbers(); track page) {
                        <li class="page-item" [class.active]="page === currentPage + 1">
                          <button class="page-link" (click)="goToPage(page - 1)">{{ page }}</button>
                        </li>
                      }
                      <li class="page-item" [class.disabled]="currentPage === totalPages - 1">
                        <button class="page-link" (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages - 1">
                          <i class="bi bi-chevron-right"></i>
                        </button>
                      </li>
                    </ul>
                  </nav>
                </div>
              } @else {
                <div class="empty-state">
                  <div class="empty-icon">üìù</div>
                  <h3>Kh√¥ng t√¨m th·∫•y b√†i vi·∫øt n√†o</h3>
                  <p>H√£y th·ª≠ t√¨m ki·∫øm v·ªõi t·ª´ kh√≥a kh√°c ho·∫∑c xem t·∫•t c·∫£ b√†i vi·∫øt</p>
                  <button class="btn btn-primary" (click)="clearFilters()">
                    <i class="bi bi-arrow-clockwise"></i> Xem t·∫•t c·∫£
                  </button>
                </div>
              }
            }
          </div>

          <!-- Sidebar -->
          <div class="col-lg-4">
            <div class="sidebar">
              <!-- Categories Widget -->
              <div class="widget">
                <div class="widget-header">
                  <h3 class="widget-title">
                    <i class="bi bi-folder2-open"></i>
                    Chuy√™n m·ª•c
                  </h3>
                </div>
                <div class="widget-content">
                  <div class="category-list">
                    @for (category of categories; track category.id) {
                      <a 
                        class="category-item" 
                        [class.active]="selectedCategory === category.slug"
                        (click)="onCategoryChange(category.slug)">
                        <span class="category-name">{{ category.name }}</span>
                        <span class="category-count">{{ getCategoryCount(category.slug) }}</span>
                      </a>
                    }
                  </div>
                </div>
              </div>

              <!-- Recent Posts Widget -->
              <div class="widget">
                <div class="widget-header">
                  <h3 class="widget-title">
                    <i class="bi bi-clock-history"></i>
                    B√†i vi·∫øt g·∫ßn ƒë√¢y
                  </h3>
                </div>
                <div class="widget-content">
                  <div class="recent-posts">
                    @for (blog of recentBlogs; track blog.id) {
                      <div class="recent-post-item">
                        <div class="recent-post-image">
                          <img [src]="blog.imageUrl" [alt]="blog.title">
                        </div>
                        <div class="recent-post-content">
                          <h4 class="recent-post-title">
                            <a [routerLink]="['/blogs', blog.slug]">{{ blog.title }}</a>
                          </h4>
                          <div class="recent-post-meta">
                            <span class="recent-post-date">{{ formatDate(blog.publishDate) }}</span>
                            <span class="recent-post-views">{{ blog.views }} l∆∞·ª£t xem</span>
                          </div>
                        </div>
                      </div>
                    }
                  </div>
                </div>
              </div>

              <!-- Popular Posts Widget -->
              <div class="widget">
                <div class="widget-header">
                  <h3 class="widget-title">
                    <i class="bi bi-fire"></i>
                    B√†i vi·∫øt n·ªïi b·∫≠t
                  </h3>
                </div>
                <div class="widget-content">
                  <div class="popular-posts">
                    @for (blog of popularBlogs; track blog.id; let i = $index) {
                      <div class="popular-post-item">
                        <div class="popular-rank">{{ i + 1 }}</div>
                        <div class="popular-content">
                          <h4 class="popular-title">
                            <a [routerLink]="['/blogs', blog.slug]">{{ blog.title }}</a>
                          </h4>
                          <div class="popular-stats">
                            <span class="popular-views">{{ blog.views }} l∆∞·ª£t xem</span>
                            <span class="popular-likes">{{ blog.likes }} l∆∞·ª£t th√≠ch</span>
                          </div>
                        </div>
                      </div>
                    }
                  </div>
                </div>
              </div>

              <!-- Newsletter Widget -->
              <div class="widget newsletter-widget">
                <div class="widget-header">
                  <h3 class="widget-title">
                    <i class="bi bi-envelope-heart"></i>
                    Nh·∫≠n tin m·ªõi
                  </h3>
                </div>
                <div class="widget-content">
                  <p class="newsletter-text">ƒêƒÉng k√Ω ƒë·ªÉ nh·∫≠n nh·ªØng b√†i vi·∫øt hay nh·∫•t h√†ng tu·∫ßn!</p>
                  <div class="newsletter-form">
                    <input type="email" class="newsletter-input" placeholder="Email c·ªßa b·∫°n...">
                    <button class="newsletter-btn">
                      <i class="bi bi-send"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>